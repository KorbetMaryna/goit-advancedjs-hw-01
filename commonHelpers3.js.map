{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import Throttle from 'lodash.throttle';\nimport { common } from '../common.js';\n\nconst form = document.querySelector('.feedback-form');\n\nform.addEventListener('submit', handlerSubmit);\nform.addEventListener('input', Throttle(handlerInput, 500));\n\nfunction handlerSubmit(e) {\n    e.preventDefault();\n    const target = e.currentTarget;\n\n    const keyParsed = JSON.parse(localStorage.getItem(common.LS_KEY_FEEDBACK));\n    const email = target.elements.email.value;\n    const message = target.elements.message.value;\n\n    if (email === '' || message === '') {\n        return alert ('Enter data in all rows');\n    }\n\n    console.log(keyParsed);\n    target.reset();\n    localStorage.removeItem(common.LS_KEY_FEEDBACK);  \n}\n\nfunction handlerInput({ target }) {\n    const formData = localStorage.getItem(common.LS_KEY_FEEDBACK)\n    ? JSON.parse(localStorage.getItem(common.LS_KEY_FEEDBACK))\n    : {};\n\n    formData[target.name] = target.value;\n    localStorage.setItem(common.LS_KEY_FEEDBACK, JSON.stringify(formData));  \n}\n\nformSaveData();\n\nfunction formSaveData() {\n    const saveData = localStorage.getItem(common.LS_KEY_FEEDBACK);\n\n    if (saveData) {\n        const data = JSON.parse(saveData);\n        if (data.email) {\n            form.elements.email.value = data.email;\n        }\n        if (data.message) {\n            form.elements.message.value = data.message;\n        }\n    }\n}"],"names":["form","handlerSubmit","Throttle","handlerInput","e","target","keyParsed","common","email","message","formData","formSaveData","saveData","data"],"mappings":"wLAGA,MAAMA,EAAO,SAAS,cAAc,gBAAgB,EAEpDA,EAAK,iBAAiB,SAAUC,CAAa,EAC7CD,EAAK,iBAAiB,QAASE,EAASC,EAAc,GAAG,CAAC,EAE1D,SAASF,EAAcG,EAAG,CACtBA,EAAE,eAAc,EAChB,MAAMC,EAASD,EAAE,cAEXE,EAAY,KAAK,MAAM,aAAa,QAAQC,EAAO,eAAe,CAAC,EACnEC,EAAQH,EAAO,SAAS,MAAM,MAC9BI,EAAUJ,EAAO,SAAS,QAAQ,MAExC,GAAIG,IAAU,IAAMC,IAAY,GAC5B,OAAO,MAAO,wBAAwB,EAG1C,QAAQ,IAAIH,CAAS,EACrBD,EAAO,MAAK,EACZ,aAAa,WAAWE,EAAO,eAAe,CAClD,CAEA,SAASJ,EAAa,CAAE,OAAAE,GAAU,CAC9B,MAAMK,EAAW,aAAa,QAAQH,EAAO,eAAe,EAC1D,KAAK,MAAM,aAAa,QAAQA,EAAO,eAAe,CAAC,EACvD,GAEFG,EAASL,EAAO,MAAQA,EAAO,MAC/B,aAAa,QAAQE,EAAO,gBAAiB,KAAK,UAAUG,CAAQ,CAAC,CACzE,CAEAC,IAEA,SAASA,GAAe,CACpB,MAAMC,EAAW,aAAa,QAAQL,EAAO,eAAe,EAE5D,GAAIK,EAAU,CACV,MAAMC,EAAO,KAAK,MAAMD,CAAQ,EAC5BC,EAAK,QACLb,EAAK,SAAS,MAAM,MAAQa,EAAK,OAEjCA,EAAK,UACLb,EAAK,SAAS,QAAQ,MAAQa,EAAK,QAE1C,CACL"}